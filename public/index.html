<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Field Game Assistant | Eton College</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --eton:#96c8a2;--eton-dark:#6ba377;--eton-light:#c4e3cb;--eton-pale:#e8f4eb;
      --pitch-dark:#1a472a;--pitch-mid:#2d5a27;--pitch-light:#3d7a37;
      --text:#0f1f13;--text-sec:#3a4d3e;--text-inv:#f8faf8;
      --bg:#f5f9f6;--bg-sec:#e8efe9;--bg-card:#fff;--bg-deep:#0a1a0e;
      --border:rgba(150,200,162,0.2);--shadow:0 4px 12px rgba(10,26,14,0.08);
      --attacking:#2980b9;--defending:#c0392b;--ball:#f1c40f;--warning:#e67e22;--success:#27ae60;
      --ease:cubic-bezier(0.16,1,0.3,1);
    }
    html{font-size:16px}
    body{font-family:'IBM Plex Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow:hidden}
    .header{background:linear-gradient(135deg,var(--pitch-dark),var(--pitch-mid));padding:.875rem 1.5rem;display:flex;align-items:center;justify-content:space-between;box-shadow:var(--shadow);position:relative;z-index:100}
    .header::after{content:'';position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--eton),transparent)}
    .header-left{display:flex;align-items:center;gap:1rem}
    .logo{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,var(--eton),var(--eton-dark));display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-weight:700;font-size:1.25rem;color:#fff;overflow:hidden}
    .logo img{width:100%;height:100%;object-fit:cover}
    .header-title{color:var(--text-inv)}
    .header-title h1{font-family:'Playfair Display',serif;font-size:1.35rem;font-weight:600}
    .header-title p{font-size:.8rem;opacity:.7}
    .view-toggle{display:flex;background:rgba(255,255,255,.08);border-radius:10px;padding:3px;border:1px solid rgba(255,255,255,.1)}
    .view-toggle button{background:0;border:0;color:rgba(255,255,255,.6);padding:.5rem 1rem;font-size:.8rem;font-weight:500;cursor:pointer;border-radius:8px;transition:all .2s}
    .view-toggle button.active{background:var(--eton);color:var(--pitch-dark)}
    .view-toggle button:hover:not(.active){color:#fff;background:rgba(255,255,255,.1)}
    .main{display:flex;height:calc(100vh - 68px);overflow:hidden}
    .chat-panel{width:420px;min-width:380px;display:flex;flex-direction:column;background:var(--bg-card);border-right:1px solid var(--border);transition:all .4s var(--ease)}
    .chat-panel.collapsed{width:0;min-width:0;opacity:0;pointer-events:none}
    .chat-panel.expanded{width:100%;max-width:700px;margin:0 auto;border:0}
    .diagram-panel{flex:1;display:flex;flex-direction:column;background:var(--bg-deep);position:relative;overflow:hidden}
    .diagram-panel.collapsed{flex:0;opacity:0;pointer-events:none}
    .diagram-panel::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% 30%,rgba(150,200,162,.08) 0%,transparent 60%);pointer-events:none}
    .chat-messages{flex:1;overflow-y:auto;padding:1.5rem;display:flex;flex-direction:column;gap:1rem}
    .message{display:flex;gap:.75rem;max-width:88%;animation:msgIn .4s var(--ease)}
    @keyframes msgIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
    .message.user{align-self:flex-end;flex-direction:row-reverse}
    .message-avatar{width:36px;height:36px;border-radius:10px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.85rem;overflow:hidden}
    .message.assistant .message-avatar{background:linear-gradient(135deg,var(--eton),var(--eton-dark));color:#fff}
    .message.user .message-avatar{background:linear-gradient(135deg,var(--attacking),#5da4d9);color:#fff}
    .message-avatar img{width:100%;height:100%;object-fit:cover}
    .message-content{background:var(--bg-sec);padding:.875rem 1rem;border-radius:14px;border-top-left-radius:4px;font-size:.9rem;line-height:1.65;box-shadow:var(--shadow)}
    .message.user .message-content{background:linear-gradient(135deg,var(--eton),var(--eton-dark));color:#fff;border-radius:14px;border-top-right-radius:4px}
    .message-content p{margin-bottom:.6rem}
    .message-content p:last-child{margin-bottom:0}
    .diagram-badge{display:inline-flex;align-items:center;gap:.4rem;margin-top:.75rem;padding:.4rem .75rem;background:rgba(150,200,162,.15);border:1px solid rgba(150,200,162,.3);border-radius:20px;font-size:.75rem;font-weight:500;color:var(--eton-dark);cursor:pointer;transition:all .15s}
    .diagram-badge:hover{background:rgba(150,200,162,.25)}
    .chat-input-area{padding:1rem 1.25rem 1.25rem;background:var(--bg-card);border-top:1px solid var(--border)}
    .quick-chips{display:flex;gap:.4rem;margin-bottom:.75rem;flex-wrap:wrap}
    .quick-chip{padding:.35rem .7rem;background:var(--bg-sec);border:1px solid var(--border);border-radius:16px;font-size:.72rem;font-weight:500;color:var(--text-sec);cursor:pointer;transition:all .15s}
    .quick-chip:hover{background:var(--eton-pale);border-color:var(--eton);color:var(--eton-dark)}
    .input-row{display:flex;gap:.6rem;align-items:flex-end}
    .input-wrap{flex:1}
    .chat-input{width:100%;padding:.75rem 1rem;border:2px solid var(--border);border-radius:12px;font-size:.9rem;font-family:inherit;resize:none;min-height:46px;max-height:120px;background:var(--bg-card);color:var(--text);transition:all .15s}
    .chat-input:focus{outline:0;border-color:var(--eton);box-shadow:0 0 0 3px rgba(150,200,162,.15)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;padding:.65rem 1rem;border-radius:10px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .15s;border:0;font-family:inherit}
    .btn-primary{background:linear-gradient(135deg,var(--eton),var(--eton-dark));color:#fff;box-shadow:var(--shadow)}
    .btn-primary:hover:not(:disabled){transform:translateY(-1px)}
    .btn-secondary{background:var(--bg-sec);color:var(--text-sec);border:1px solid var(--border)}
    .btn-secondary:hover:not(:disabled){border-color:var(--eton);color:var(--eton-dark)}
    .btn-secondary.active{background:var(--eton-pale);border-color:var(--eton);color:var(--eton-dark)}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .btn svg{width:16px;height:16px}
    .welcome{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;text-align:center;animation:fadeIn .6s var(--ease)}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .welcome-avatar{width:72px;height:72px;border-radius:18px;margin-bottom:1.25rem;background:linear-gradient(135deg,var(--eton),var(--eton-dark));display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:2rem;font-weight:700;color:#fff;box-shadow:var(--shadow),0 0 40px rgba(150,200,162,.3);overflow:hidden}
    .welcome-avatar img{width:100%;height:100%;object-fit:cover}
    .welcome h2{font-family:'Playfair Display',serif;font-size:1.4rem;font-weight:600;margin-bottom:.5rem}
    .welcome p{color:var(--text-sec);font-size:.9rem;max-width:320px;margin-bottom:1.5rem;line-height:1.6}
    .welcome-btns{display:flex;flex-direction:column;gap:.5rem;width:100%;max-width:340px}
    .suggestion-btn{padding:.75rem 1rem;background:var(--bg-sec);border:1px solid var(--border);border-radius:10px;text-align:left;cursor:pointer;font-size:.85rem;color:var(--text-sec);transition:all .15s;display:flex;align-items:center;gap:.6rem}
    .suggestion-btn:hover{background:var(--eton-pale);border-color:var(--eton);color:var(--eton-dark);transform:translateX(4px)}
    .suggestion-btn span{font-size:1.1rem}
    .typing{display:flex;gap:4px;padding:.5rem 0}
    .typing span{width:8px;height:8px;border-radius:50%;background:var(--eton);animation:bounce 1.4s ease-in-out infinite}
    .typing span:nth-child(2){animation-delay:.15s}
    .typing span:nth-child(3){animation-delay:.3s}
    @keyframes bounce{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-8px);opacity:1}}
    .scenario-bar{padding:.6rem 1rem;background:rgba(0,0,0,.3);backdrop-filter:blur(12px);border-bottom:1px solid rgba(150,200,162,.1);display:flex;gap:.4rem;overflow-x:auto;scrollbar-width:none}
    .scenario-bar::-webkit-scrollbar{display:none}
    .scenario-tab{padding:.45rem .9rem;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:8px;font-size:.72rem;font-weight:500;color:rgba(255,255,255,.6);cursor:pointer;white-space:nowrap;transition:all .15s}
    .scenario-tab:hover{background:rgba(255,255,255,.1);color:#fff}
    .scenario-tab.active{background:var(--eton);border-color:var(--eton);color:var(--pitch-dark)}
    .diagram-header{padding:.875rem 1.25rem;background:rgba(0,0,0,.2);backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(150,200,162,.1)}
    .diagram-info{flex:1}
    .diagram-title{font-family:'Playfair Display',serif;font-size:1.1rem;font-weight:600;color:var(--text-inv);margin-bottom:.15rem}
    .diagram-desc{font-size:.8rem;color:rgba(255,255,255,.5)}
    .diagram-toolbar{display:flex;gap:.35rem}
    .tool-btn{width:34px;height:34px;border-radius:8px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.05);cursor:pointer;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.5);transition:all .15s}
    .tool-btn:hover{background:rgba(255,255,255,.1);color:#fff}
    .tool-btn.active{background:var(--eton);border-color:var(--eton);color:var(--pitch-dark)}
    .tool-btn svg{width:16px;height:16px}
    .pitch-viewport{flex:1;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:grab}
    .pitch-viewport.dragging{cursor:grabbing}
    .pitch-svg{display:block;filter:drop-shadow(0 20px 60px rgba(0,0,0,.4));border-radius:4px;max-width:100%;max-height:100%}
    .pitch-base{fill:var(--pitch-mid)}.grass-dark{fill:var(--pitch-dark);opacity:.3}.grass-light{fill:var(--pitch-light);opacity:.15}
    .pitch-line{stroke:rgba(255,255,255,.75);stroke-width:.4;fill:none}.pitch-line-dash{stroke-dasharray:1.5,1.5;opacity:.6}
    .goal-frame{fill:none;stroke:#fff;stroke-width:.8}.goal-net{fill:rgba(255,255,255,.03);stroke:rgba(255,255,255,.15);stroke-width:.3}
    .player{cursor:pointer}.player-shadow{fill:rgba(0,0,0,.25)}.player-ring{fill:none;opacity:0;transition:opacity .2s}
    .player:hover .player-ring{opacity:.5}.player.highlight .player-ring{opacity:1;stroke:var(--ball)}
    .player.attacking .player-body{fill:var(--attacking)}.player.attacking .player-ring{stroke:#5da4d9}
    .player.defending .player-body{fill:var(--defending)}.player.defending .player-ring{stroke:#e74c3c}
    .player.sneaking .player-body,.player.cornering .player-body{fill:var(--warning)}
    .player-label{fill:#fff;font-family:'JetBrains Mono',monospace;font-weight:600;text-anchor:middle;dominant-baseline:central;pointer-events:none}
    .player-role{fill:rgba(255,255,255,.9);text-anchor:middle;pointer-events:none;opacity:0;transition:opacity .15s}
    .player:hover .player-role{opacity:1}.show-labels .player-role{opacity:.8}
    .ball-glow{fill:rgba(241,196,15,.5)}.ball-body{fill:var(--ball);stroke:#d4a017}.ball-highlight{fill:rgba(255,255,255,.4)}.ball-shadow{fill:rgba(0,0,0,.2)}
    .zone{pointer-events:none}.zone-fill{opacity:.15}.zone-border{fill:none;stroke-dasharray:2,2;opacity:.5}
    .zone.sneaking .zone-fill{fill:var(--warning)}.zone.sneaking .zone-border{stroke:var(--warning)}
    .zone.onTheLine .zone-fill{fill:var(--eton)}.zone.onTheLine .zone-border{stroke:var(--eton)}
    .zone.rougeable .zone-fill{fill:var(--success)}.zone.rougeable .zone-border{stroke:var(--success)}
    .zone.bully .zone-fill{fill:#3498db}.zone.bully .zone-border{stroke:#3498db}
    .arrow-path{fill:none;stroke-linecap:round}.arrow-label{fill:#fff;text-anchor:middle;paint-order:stroke;stroke:var(--bg-deep)}
    .annotation{pointer-events:none}.annotation-bg{fill:rgba(0,0,0,.75)}.annotation-text{fill:#fff;text-anchor:middle;dominant-baseline:middle}
    .annotation.warning .annotation-bg{fill:rgba(230,126,34,.9)}.annotation.scoring .annotation-bg{fill:rgba(39,174,96,.9)}.annotation.info .annotation-bg{fill:rgba(52,152,219,.85)}
    .zoom-controls{position:absolute;bottom:1rem;right:1rem;display:flex;flex-direction:column;gap:.25rem;z-index:10}
    .zoom-btn{width:36px;height:36px;border-radius:8px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.5);backdrop-filter:blur(8px);cursor:pointer;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.8);font-size:1.2rem;font-weight:bold;transition:all .15s}
    .zoom-btn:hover{background:rgba(0,0,0,.7);color:#fff}.zoom-info{text-align:center;font-size:.65rem;color:rgba(255,255,255,.5);padding:.25rem 0}
    .playback-bar{padding:.875rem 1.25rem;background:rgba(0,0,0,.4);backdrop-filter:blur(16px);border-top:1px solid rgba(150,200,162,.1);display:flex;align-items:center;gap:1rem}
    .playback-controls{display:flex;gap:.4rem;align-items:center}
    .playback-btn{width:38px;height:38px;border-radius:50%;border:0;background:rgba(255,255,255,.08);cursor:pointer;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.7);transition:all .15s}
    .playback-btn:hover:not(:disabled){background:rgba(255,255,255,.15);color:#fff}.playback-btn:disabled{opacity:.3;cursor:not-allowed}
    .playback-btn.play-pause{width:44px;height:44px;background:var(--eton);color:var(--pitch-dark)}.playback-btn.play-pause:hover{background:var(--eton-light)}
    .playback-btn svg{width:18px;height:18px}
    .timeline{flex:1;display:flex;flex-direction:column;gap:.5rem}
    .timeline-track{height:4px;background:rgba(255,255,255,.1);border-radius:2px;cursor:pointer;position:relative;overflow:hidden}
    .timeline-progress{height:100%;background:linear-gradient(90deg,var(--eton),var(--eton-light));border-radius:2px;transition:width .3s var(--ease)}
    .timeline-progress::after{content:'';position:absolute;right:0;top:50%;transform:translateY(-50%);width:12px;height:12px;background:#fff;border-radius:50%;box-shadow:var(--shadow)}
    .timeline-caption{font-size:.8rem;color:rgba(255,255,255,.6);text-align:center;min-height:1.2em;transition:opacity .3s}
    .step-indicator{font-family:'JetBrains Mono',monospace;font-size:.75rem;color:rgba(255,255,255,.5);min-width:50px;text-align:right}
    .legend-bar{padding:.5rem 1rem;background:rgba(0,0,0,.3);display:flex;justify-content:center;gap:1.25rem;flex-wrap:wrap}
    .legend-item{display:flex;align-items:center;gap:.4rem;font-size:.7rem;color:rgba(255,255,255,.5)}
    .legend-dot{width:10px;height:10px;border-radius:50%;box-shadow:0 0 8px currentColor}
    .legend-dot.attacking{background:var(--attacking);color:var(--attacking)}.legend-dot.defending{background:var(--defending);color:var(--defending)}
    .legend-dot.ball{background:var(--ball);color:var(--ball)}.legend-dot.sneaking{background:var(--warning);color:var(--warning)}
    @media(max-width:1024px){.main{flex-direction:column}.chat-panel{width:100%;min-width:0;height:45%;border-right:0;border-bottom:1px solid var(--border)}.chat-panel.collapsed{height:0}.chat-panel.expanded{height:100%}.diagram-panel{height:55%}.diagram-panel.collapsed{height:0}}
    @media(max-width:600px){.header{padding:.75rem 1rem}.header-title h1{font-size:1.15rem}.quick-chips{display:none}}
  </style>
</head>
<body>
  <header class="header">
    <div class="header-left">
      <div class="logo"><img src="ralph.png" alt="R" onerror="this.style.display='none';this.parentElement.textContent='R';"></div>
      <div class="header-title"><h1>Field Game Assistant</h1><p>Interactive Laws Visualiser</p></div>
    </div>
    <div class="view-toggle">
      <button id="vChat" onclick="setView('chat')">Chat</button>
      <button id="vSplit" class="active" onclick="setView('split')">Split</button>
      <button id="vDiagram" onclick="setView('diagram')">Pitch</button>
    </div>
    <a href="3d.html" class="btn-3d">üéÆ 3D View</a>
  </header>
  <main class="main">
    <section class="chat-panel" id="chatPanel">
      <div class="chat-messages" id="chatMessages">
        <div class="welcome" id="welcome">
          <div class="welcome-avatar"><img src="ralph.png" alt="R" onerror="this.style.display='none';this.parentElement.textContent='R';"></div>
          <h2>Welcome to the Field Game</h2>
          <p>I am Ralph, your guide to the Laws of the Field Game as played at Eton College.</p>
          <div class="welcome-btns">
            <button class="suggestion-btn" onclick="askQ('Explain Sneaking with a diagram')"><span>üëÅ</span>Explain Sneaking</button>
            <button class="suggestion-btn" onclick="askQ('What is a Rouge?')"><span>üéØ</span>What is a Rouge?</button>
            <button class="suggestion-btn" onclick="askQ('Show me on-the-line play')"><span>üìè</span>On-the-line rules</button>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div class="quick-chips">
          <button class="quick-chip" onclick="loadScenario('kickoff')">Kick-off</button>
          <button class="quick-chip" onclick="loadScenario('sneaking')">Sneaking</button>
          <button class="quick-chip" onclick="loadScenario('onTheLine')">On-the-Line</button>
          <button class="quick-chip" onclick="loadScenario('rouge')">Rouge</button>
          <button class="quick-chip" onclick="loadScenario('furking')">Furking</button>
          <button class="quick-chip" onclick="loadScenario('cornering')">Cornering</button>
          <button class="quick-chip" onclick="loadScenario('conversion')">Conversion</button>
        </div>
        <div class="input-row">
          <div class="input-wrap"><textarea class="chat-input" id="chatInput" placeholder="Ask about Field Game rules..." rows="1"></textarea></div>
          <div class="input-actions">
            <button class="btn btn-secondary" id="diagramBtn" onclick="toggleDiag()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8" cy="8" r="2"/><circle cx="16" cy="16" r="2"/><path d="M8 8l8 8"/></svg></button>
            <button class="btn btn-primary" onclick="sendMsg()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg></button>
          </div>
        </div>
      </div>
    </section>
    <section class="diagram-panel" id="diagramPanel">
      <div class="scenario-bar" id="scenarioBar"></div>
      <div class="diagram-header">
        <div class="diagram-info"><div class="diagram-title" id="diagTitle">Select a Scenario</div><div class="diagram-desc" id="diagDesc">Choose from the tabs above or ask a question</div></div>
        <div class="diagram-toolbar">
          <button class="tool-btn" id="labelsBtn" onclick="toggleLabels()" title="Toggle Labels"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg></button>
          <button class="tool-btn" onclick="resetCamera()" title="Reset View"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 109-9 9.75 9.75 0 00-6.74 2.74L3 8M3 3v5h5"/></svg></button>
        </div>
      </div>
      <div class="pitch-viewport" id="viewport">
        <svg class="pitch-svg" id="pitch" viewBox="-5 -5 120 85" preserveAspectRatio="xMidYMid meet">
          <defs><marker id="arrow" markerWidth="4" markerHeight="3" refX="3.5" refY="1.5" orient="auto"><polygon points="0 0,4 1.5,0 3" fill="currentColor"/></marker></defs>
          <rect class="pitch-base" x="0" y="0" width="110" height="75" rx="1"/>
          <g class="stripes"><rect class="grass-dark" x="0" y="0" width="10" height="75"/><rect class="grass-light" x="10" y="0" width="10" height="75"/><rect class="grass-dark" x="20" y="0" width="10" height="75"/><rect class="grass-light" x="30" y="0" width="10" height="75"/><rect class="grass-dark" x="40" y="0" width="10" height="75"/><rect class="grass-light" x="50" y="0" width="10" height="75"/><rect class="grass-dark" x="60" y="0" width="10" height="75"/><rect class="grass-light" x="70" y="0" width="10" height="75"/><rect class="grass-dark" x="80" y="0" width="10" height="75"/><rect class="grass-light" x="90" y="0" width="10" height="75"/><rect class="grass-dark" x="100" y="0" width="10" height="75"/></g>
          <g class="lines"><rect class="pitch-line" x="0" y="0" width="110" height="75"/><line class="pitch-line" x1="55" y1="0" x2="55" y2="75"/><line class="pitch-line" x1="15" y1="0" x2="15" y2="75"/><line class="pitch-line" x1="95" y1="0" x2="95" y2="75"/><line class="pitch-line pitch-line-dash" x1="3" y1="0" x2="3" y2="75"/><line class="pitch-line pitch-line-dash" x1="107" y1="0" x2="107" y2="75"/><line class="pitch-line pitch-line-dash" x1="0" y1="18.75" x2="110" y2="18.75"/><line class="pitch-line pitch-line-dash" x1="0" y1="56.25" x2="110" y2="56.25"/></g>
          <g class="goals"><rect class="goal-net" x="-3" y="30" width="3" height="15"/><path class="goal-frame" d="M0 30L-3 30L-3 45L0 45"/><rect class="goal-net" x="110" y="30" width="3" height="15"/><path class="goal-frame" d="M110 30L113 30L113 45L110 45"/></g>
          <g id="zones"></g><g id="arrows"></g><g id="players"></g><g id="ball"></g><g id="annotations"></g>
        </svg>
        <div class="zoom-controls"><button class="zoom-btn" onclick="zoomIn()">+</button><div class="zoom-info" id="zoomInfo">100%</div><button class="zoom-btn" onclick="zoomOut()">‚àí</button></div>
      </div>
      <div class="playback-bar">
        <div class="playback-controls">
          <button class="playback-btn" id="prevBtn" onclick="prevStep()" disabled><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 5v14l-10-7zM5 5h3v14H5z"/></svg></button>
          <button class="playback-btn play-pause" id="playBtn" onclick="togglePlay()"><svg viewBox="0 0 24 24" fill="currentColor" id="playIco"><path d="M8 5v14l11-7z"/></svg><svg viewBox="0 0 24 24" fill="currentColor" id="pauseIco" style="display:none"><path d="M6 4h4v16H6zM14 4h4v16h-4z"/></svg></button>
          <button class="playback-btn" id="nextBtn" onclick="nextStep()" disabled><svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 5v14l10-7zM16 5h3v14h-3z"/></svg></button>
        </div>
        <div class="timeline"><div class="timeline-track" onclick="seek(event)"><div class="timeline-progress" id="progress" style="width:0%"></div></div><div class="timeline-caption" id="caption">Select a scenario to begin</div></div>
        <div class="step-indicator" id="stepInd">-</div>
      </div>
      <div class="legend-bar">
        <div class="legend-item"><div class="legend-dot attacking"></div>Attacking</div>
        <div class="legend-item"><div class="legend-dot defending"></div>Defending</div>
        <div class="legend-item"><div class="legend-dot ball"></div>Ball</div>
        <div class="legend-item"><div class="legend-dot sneaking"></div>Offence</div>
      </div>
    </section>
  </main>
  <script src="app.js"></script>
</body>
</html>
